{"version":3,"sourceRoot":"/assets/plugins","sources":["_discourse-presence-e575490133b5e948d5db094ba04f265c777e7d5003f1b418d1b7a38c8f64a317.js"],"names":["define","_exports","_presence","_runloop","_decorators","_computed","_component","_service","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_applyDecoratedDescriptor","target","property","decorators","descriptor","context","desc","Object","keys","forEach","key","enumerable","configurable","initializer","writable","slice","reverse","reduce","decorator","value","call","undefined","defineProperty","default","_default","extend","on","observes","_dec7","_dec8","_obj","presenceManager","inject","users","topicId","this","editingUsers","isReply","readOnly","isEdit","subscribe","get","COMPOSER_TYPE","presenceUsers","postId","filterBy","shouldDisplay","gt","typing","throttle","_typing","KEEP_ALIVE_DURATION_SECONDS","data","state","EDITING","REPLYING","whisper","presenceStaffOnly","_prevPublishData","_throttle","publish","cancelThrottle","_cancelThrottle","composerState","CLOSED","closeComposer","cleanUpPresence","cancel","getOwnPropertyDescriptor","topic","didReceiveAttrs","_super","apply","arguments","unsubscribe","TOPIC_TYPE","set","_destroyed","_object","_ajax","Presence","subscribers","currentUser","messageBus","siteSettings","init","setProperties","Set","type","_this","size","channel","message","user","id","_appendUser","post_id","parseInt","_removeUser","add","delete","noSubscribers","_stopTimer","concat","staffOnly","hiddenProfile","topic_id","is_whisper","staff_only","ajax","existingUser","findBy","removeObject","_cleanUpUsers","staleUsers","last_seen","Date","now","BUFFER_DURATION_SECONDS","push","removeObjects","length","attrs","_this2","usersLength","u","limit","props","pushObject","create","assign","_startTimer","_scheduleTimer","callback","_this3","later","_timer","PresenceManager","presences","_getPresence","Ember","TEMPLATES","HTMLBars","template","block","meta","moduleName","shouldRender","_","component","presence_enabled"],"mappings":"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"}