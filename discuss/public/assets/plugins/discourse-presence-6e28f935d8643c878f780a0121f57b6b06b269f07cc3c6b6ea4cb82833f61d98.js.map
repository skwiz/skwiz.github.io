{"version":3,"sourceRoot":"/assets/plugins","sources":["_discourse-presence-6e28f935d8643c878f780a0121f57b6b06b269f07cc3c6b6ea4cb82833f61d98.js"],"names":["define","_exports","_runloop","_object","_ajax","_decorators","_dec","Object","defineProperty","value","default","COMPOSER_TYPE","TOPIC_TYPE","CLOSED","EDITING","REPLYING","KEEP_ALIVE_DURATION_SECONDS","target","property","decorators","descriptor","context","desc","Presence","extend","_obj","users","editingUsers","subscribers","topicId","currentUser","messageBus","siteSettings","init","this","_super","apply","arguments","setProperties","Set","subscribe","type","_this","size","channel","message","user","state","get","id","_appendUser","post_id","parseInt","_removeUser","add","unsubscribe","delete","noSubscribers","_stopTimer","concat","publish","whisper","postId","staffOnly","hiddenProfile","undefined","data","topic_id","is_whisper","staff_only","ajax","forEach","existingUser","findBy","removeObject","_cleanUpUsers","staleUsers","last_seen","Date","now","BUFFER_DURATION_SECONDS","push","removeObjects","length","attrs","_this2","usersLength","u","limit","props","pushObject","create","assign","_startTimer","_scheduleTimer","callback","_this3","later","set","cancel","_timer","getOwnPropertyDescriptor","keys","key","enumerable","configurable","initializer","writable","slice","reverse","reduce","decorator","call","_presence","_service","PresenceManager","presences","_getPresence","cleanUpPresence","_computed","_component","_dec2","_dec3","_dec4","_dec5","_dec6","_applyDecoratedDescriptor","_default","on","observes","_dec7","_dec8","presenceManager","inject","isReply","readOnly","isEdit","presenceUsers","filterBy","shouldDisplay","gt","typing","throttle","_typing","presenceStaffOnly","_prevPublishData","_throttle","cancelThrottle","_cancelThrottle","composerState","closeComposer","topic","_destroyed","Ember","TEMPLATES","HTMLBars","template","block","meta","moduleName","shouldRender","_","component","presence_enabled"],"mappings":"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"}