{"version":3,"sourceRoot":"/assets/plugins","sources":["_discourse-whos-online-e31fcfa7ce1d9a92ba43c6a57559ed5855f2fa81795b2e235dcfb7c7105f083a.js"],"names":["define","_exports","_ember","Object","defineProperty","value","default","_default","Component","extend","tagName","attributeBindings","inject","showWhosOnline","this","get","users","length","siteSettings","whos_online_minimum_display","whos_online_hide_below_minimum_display","property","online","service","slice","whos_online_maximum_display","isLong","whos_online_collapse_threshold","isUsers","_pluginApi","_decorators","_applyDecoratedDescriptor","target","decorators","descriptor","context","desc","keys","forEach","key","enumerable","configurable","initializer","writable","reverse","reduce","decorator","call","undefined","Ember","name","initialize","container","onlineService","lookup","indicatorType","whos_online_avatar_indicator","$","addClass","concat","withPluginApi","api","_dec3","_obj3","modifyClass","_dec","_obj","classNameBindings","isOnline","user","isUserOnline","id","getOwnPropertyDescriptor","afterModel","updateBodyClass","_super","user_id","modelFor","removeClass","observes","deactivate","whos_online_avatar_indicator_topic_lists","_dec2","_obj2","lastPosterId","lastPosterUserId","didInsertElement","_this","appEvents","on","changedUserIds","posts","filter","_ref","map","post","postId","dirtyKeys","keyDirty","onRefresh","queueRerender","willDestroyElement","off","reopenWidget","buildKey","attrs","defaultState","updateOnline","state","buildClasses","_ajax","_user","_site","_toConsumableArray","arr","Array","isArray","_arrayLikeToArray","_arrayWithoutHoles","iter","Symbol","iterator","from","_iterableToArray","o","minLen","n","prototype","toString","constructor","test","_unsupportedIterableToArray","TypeError","_nonIterableSpread","len","i","arr2","Service","after","messageBus","window","MessageBus","Discourse","__container__","_lastMessageId","find","element","messageProcessor","data","global_id","message_id","currentUsers","unsubscribe","func","ajax","method","then","result","oldUserIds","set","create","newUserIds","subscribe","changedUsers","trigger","msg","console","log","pushObject","matchById","found","removeObject","error","init","startingData","currentProp","apply","arguments","shouldDisplay","whos_online_enabled","whos_online_display_public","currentUser","User","current","trust_level","whos_online_display_min_trust_level","TEMPLATES","HTMLBars","template","block","meta","moduleName"],"mappings":"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"}