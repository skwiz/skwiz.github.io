{"version":3,"sources":["_discourse-presence-9d6196005999f42e3a0768b2160d00e594999f44850f5284e33ad17b288d9a21.js"],"names":["define","_exports","_presence","_runloop","_decorators","_computed","_component","_service","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_obj","_applyDecoratedDescriptor","target","property","decorators","descriptor","context","desc","Object","keys","forEach","key","enumerable","configurable","initializer","writable","slice","reverse","reduce","decorator","value","call","undefined","defineProperty","default","_default","extend","on","observes","presenceManager","inject","users","topicId","this","editingUsers","isReply","readOnly","isEdit","subscribe","get","COMPOSER_TYPE","presenceUsers","postId","filterBy","shouldDisplay","gt","typing","throttle","_typing","KEEP_ALIVE_DURATION_SECONDS","data","state","EDITING","REPLYING","whisper","presenceStaffOnly","_prevPublishData","_throttle","publish","cancelThrottle","_cancelThrottle","composerState","CLOSED","closeComposer","cleanUpPresence","cancel","getOwnPropertyDescriptor","topic","didReceiveAttrs","_super","apply","arguments","unsubscribe","TOPIC_TYPE","set","_destroyed","_object","_ajax","subscribers","currentUser","messageBus","siteSettings","init","setProperties","Set","type","_this","size","channel","message","user","id","_appendUser","post_id","parseInt","_removeUser","add","delete","noSubscribers","_stopTimer","concat","staffOnly","hiddenProfile","topic_id","is_whisper","staff_only","ajax","existingUser","findBy","removeObject","_cleanUpUsers","staleUsers","last_seen","Date","now","BUFFER_DURATION_SECONDS","push","removeObjects","length","attrs","_this2","usersLength","u","props","limit","pushObject","create","assign","_startTimer","_scheduleTimer","callback","_this3","later","_timer","presences","_getPresence","Ember","TEMPLATES","HTMLBars","template","block","meta","moduleName","shouldRender","_","component","presence_enabled"],"mappings":"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","sourceRoot":"/assets/plugins"}