{"version":3,"sources":["_discourse-presence-9d6196005999f42e3a0768b2160d00e594999f44850f5284e33ad17b288d9a21.js"],"names":["define","_exports","_presence","_runloop","_decorators","_computed","_component","_service","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_obj","_applyDecoratedDescriptor","target","property","decorators","descriptor","context","desc","Object","keys","forEach","key","enumerable","configurable","initializer","writable","slice","reverse","reduce","decorator","value","call","undefined","defineProperty","default","_default","extend","on","observes","presenceManager","inject","users","topicId","this","editingUsers","isReply","readOnly","isEdit","subscribe","get","COMPOSER_TYPE","presenceUsers","postId","filterBy","shouldDisplay","gt","typing","throttle","_typing","KEEP_ALIVE_DURATION_SECONDS","data","state","EDITING","REPLYING","whisper","presenceStaffOnly","_prevPublishData","_throttle","publish","cancelThrottle","_cancelThrottle","composerState","CLOSED","closeComposer","cleanUpPresence","cancel","getOwnPropertyDescriptor","topic","didReceiveAttrs","_super","apply","arguments","unsubscribe","TOPIC_TYPE","set","_destroyed","_object","_ajax","Presence","subscribers","currentUser","messageBus","siteSettings","init","setProperties","Set","type","_this","size","channel","message","user","id","_appendUser","post_id","parseInt","_removeUser","add","delete","noSubscribers","_stopTimer","concat","staffOnly","hiddenProfile","topic_id","is_whisper","staff_only","ajax","existingUser","findBy","removeObject","_cleanUpUsers","staleUsers","last_seen","Date","now","BUFFER_DURATION_SECONDS","push","removeObjects","length","attrs","_this2","usersLength","u","props","limit","pushObject","create","assign","_startTimer","_scheduleTimer","callback","_this3","later","_timer","PresenceManager","presences","_getPresence","Ember","TEMPLATES","HTMLBars","template","block","meta","moduleName","shouldRender","_","component","presence_enabled"],"mappings":"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","sourceRoot":"/assets/plugins"}